{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Phonebook.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","value","search","onChange","handler","PersonForm","onSubmit","addNumber","newName","handleNameChange","newNumber","handleNumberChange","type","Phonebook","person","del","name","number","onClick","id","Persons","persons","filter","el","toLowerCase","indexOf","map","baseUrl","axios","get","then","r","data","newObject","post","put","delete","Notification","message","error","className","App","useState","setPersons","setNewName","setNewNumber","setNewSearch","notification","setNotification","errorBoolean","setErrorBoolean","useEffect","personService","initialPersons","changeNum","num","find","n","changedNumber","returnedNum","setTimeout","catch","e","console","log","response","event","target","preventDefault","phoneObject","inList","includes","window","confirm","returnedPerson","concat","personName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.24a8d308.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n\r\nconst Filter = (props) => {\r\n  // console.log(props);\r\n    return (\r\n        <div>\r\n        filter shown with{\" \"}\r\n        <input value={props.search} onChange={props.handler}></input>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Filter","import React from 'react'\r\n\r\n\r\nconst PersonForm = (props) => {\r\n    return (\r\n        <div>\r\n        <form onSubmit={props.addNumber}>\r\n        <div>\r\n          name: <input value={props.newName} onChange={props.handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default PersonForm","import React from 'react'\r\n\r\nconst Phonebook = ({ person, del }) => {\r\n    // console.log(\"Name:\", person);\r\n  \r\n    return (\r\n      <li key={person.id}>\r\n        {person.name} {person.number} \r\n        <button type='button' onClick={del} id={person.id} name={person.name}>delete</button>\r\n      </li>\r\n    );\r\n  };\r\n\r\n  export default Phonebook","import React from \"react\";\r\nimport Phonebook from \"./Phonebook\";\r\n\r\nconst Persons = (props) => {\r\n  \r\n  return props.persons\r\n    .filter((el) => el.name.toLowerCase().indexOf(props.search.toLowerCase()) !== -1)\r\n    .map((person) => <Phonebook key={person.name} person={person} del={props.del} />);\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((r) => r.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((r) => r.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((r) => r.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then();\r\n};\r\n\r\nexport default { getAll, create, update, deletePerson }\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, error }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  if (error === true) {\r\n    return <div className=\"error\">{message}</div>;\r\n  } else {\r\n    return <div className=\"notification\">{message}</div>;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  // Remember to start json-server\n  // Mocharoo generated json data\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setNewSearch] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  const [errorBoolean, setErrorBoolean] = useState(false);\n\n  useEffect(\n    () =>\n      personService.getAll().then((initialPersons) => {\n        setPersons(initialPersons);\n      }),\n    []\n  );\n\n  const addNumber = (event) => {\n    event.preventDefault();\n    console.log(\"Add button clicked\", event.target);\n    console.log(\"Add name\", persons);\n\n    const phoneObject = {\n      name: newName,\n      number: newNumber,\n    };\n\n    const inList = !persons.includes(\n      persons.find(({ name }) => name === phoneObject.name)\n    )\n      ? personService.create(phoneObject).then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setNotification(`Added ${phoneObject.name}`);\n          setTimeout(() => {\n            setNotification(null);\n          }, 5000);\n        }).catch(e => {\n          console.log(e.response.data);\n          setErrorBoolean(true)\n          setNotification(e.response.data.error)\n          setTimeout(() => {\n            setNotification(null)\n            setErrorBoolean(false)\n          }, 5000)\n        })\n      : window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ? changeNum(\n          persons.find(({ name }) => name === phoneObject.name).id,\n          newNumber\n        )\n      : (setNewNumber(\"\"), setNewName(\"\"));\n\n    console.log(\"This adding\", inList);\n  };\n\n  const changeNum = (id, num) => {\n    const person = persons.find((n) => n.id === id);\n    const changedNumber = { ...person, number: num };\n\n    personService.update(id, changedNumber).then((returnedNum) => {\n      setPersons(\n        persons.map((person) => (person.id !== id ? person : returnedNum))\n      );\n      setNotification(`'${person.name}' number changed to '${num}'`);\n      setTimeout(() => setNotification(null), 5000);\n    }).catch(e => console.log(e.response.data));\n  };\n\n  const deletePerson = (e) => {\n    //console.log(persons);\n    // const newList = persons.filter(person => e.target.value !== person.id)\n    console.log(\"delete e props \", e);\n    const personName = e.target.name;\n\n    window.confirm(`Delete ${personName}?`)\n      ? personService\n          .deletePerson(e.target.id)\n          .then(\n            () =>\n              personService.getAll().then((initialPersons) => {\n                setPersons(initialPersons);\n              }),\n            setNotification(`'${personName}' deleted succesfully`),\n            setTimeout(() => {\n              setNotification(null);\n            }, 5000),\n            []\n          )\n          .catch((error) => {\n            setErrorBoolean(true);\n            setNotification(\n              `'${personName}' is already deleted from the server`\n            );\n            setTimeout(() => {\n              setNotification(null);\n              setErrorBoolean(false);\n            }, 5000);\n          })\n      : console.log(\"Cancel\");\n\n    setPersons(persons.filter((n) => n.id !== e.target.id));\n  };\n\n  const handleNameChange = (event) => {\n    // console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    // console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchChange = (event) => {\n    // console.log(event.target.value);\n    setNewSearch(event.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} error={errorBoolean} />\n      <Filter search={search} handler={handleSearchChange}></Filter>\n      <h2>Add a new</h2>\n      <PersonForm\n        addNumber={addNumber}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      ></PersonForm>\n      <h2>Numbers</h2>\n      <Persons persons={persons} search={search} del={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\n\nimport './index.css'\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}